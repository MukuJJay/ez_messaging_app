<div class="flex">
  <!-- contacts and groups section  -->
  <section
    class="h-screen bg-primaryColor border-x border-secondaryColor border-solid flex flex-col items-center relative w-2/6 md:w-full"
  >
    <div
      *ngFor="let contact of allContacts; let i = index"
      class="w-full h-20 border-b-2 border-darkestPrimaryColor border-solid flex p-4 cursor-pointer transition-all duration-300 {{
        selectedContact?.username !== contact?.username
          ? 'hover:bg-darkestPrimaryColorHover'
          : ''
      }}"
      [class.active-ts]="selectedContact?.username === contact?.username"
      (click)="setActiveIndex(contact)"
    >
      <p class="text-quaternary text-secondaryColor font-bold">
        {{ contact.username }}
      </p>
    </div>
  </section>

  <!-- desktop if nothing from prev section is selected  -->
  <section
    class="w-4/6 relative md:hidden flex justify-center items-center px-10"
    *ngIf="!selectedContact"
  >
    <h2 class="text-secondary text-tertiaryColor">
      Click on a contact or group to see messages
    </h2>
  </section>

  <!-- main chat section  -->
  <section
    class="w-4/6 relative md:w-screen h-screen md:fixed md:z-50 bg-primaryColor"
    *ngIf="selectedContact"
  >
    <!-- header  -->
    <div
      class="w-full bg-darkestPrimaryColor flex justify-between items-center px-4 h-[10%]"
    >
      <div class="flex justify-center items-center gap-3">
        <button
          type="button"
          (click)="clearSelectedContact()"
          class="w-10 h-10 bg-secondaryColor rounded-full mdm:hidden"
        >
          <i class="fa fa-lg fa-arrow-left" aria-hidden="true"></i>
        </button>
        <h4 class="text-tertiary text-secondaryColor font-bold">
          {{ selectedContact.username }}
        </h4>
      </div>
    </div>

    <!-- body  -->
    <ul #chatroom class="w-full overflow-y-auto h-[75%]">
      <li
        *ngFor="let convo of allConvo"
        class="text-quinary text-white my-2"
        [class.sentMsg]="
          selectedContact._id.toString() !== convo.senderId.toString()
        "
        [class.receiveMsg]="
          selectedContact._id.toString() === convo.senderId.toString()
        "
      >
        <span class="max-w-[80%] break-words">{{ convo.messageId.msg }}</span>
      </li>
    </ul>

    <!-- footer  -->
    <div class="relative w-full h-[15%] flex items-center justify-evenly">
      <textarea
        rows="4"
        name="message"
        class="bg-darkestPrimaryColor p-4 text-quaternary text-white focus:outline-none resize-none h-[85%] w-[85%] rounded-lg"
        placeholder="Press enter to send your message"
        [(ngModel)]="typedMessage"
      ></textarea>
      <button
        type="button"
        (click)="fetchingTypedMessage()"
        class="w-12 h-12 bg-secondaryColor rounded-full disabled:opacity-50"
        [disabled]="isSendBtnDisabled()"
      >
        <i class="fa fa-lg fa-paper-plane" aria-hidden="true"></i>
      </button>
    </div>
  </section>
</div>
